!function(t){"use strict";"function"!=typeof String.prototype.endsWith&&(String.prototype.endsWith=function(t){return-1!==this.indexOf(t,this.length-t.length)}),t.Hashcode=function(){var t=function(t){var n,e=0;for(t=t.toString(),n=0;n<t.length;n++)e=(e<<5)-e+t.charCodeAt(n)&4294967295;return e},n=function(n){var s=0;for(var o in n)n.hasOwnProperty(o)&&(s+=t(o+e(n[o])));return s},e=function(e){var s={string:t,number:t,"boolean":t,object:n},o=typeof e;return null!==e&&s[o]?s[o](e)+t(o):0};return{value:e}}(),t._=t._||{};var n=function(t,n){return null!=t&&hasOwnProperty.call(t,n)},e=function(t){var n=typeof t;return"function"===n||"object"===n&&!!t},s=function(t){if(!e(t))return[];if(Object.keys)return Object.keys(t);var s=[];for(var o in t)n(t,o)&&s.push(o);return s},o={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},i=function(t){var n=function(n){return t[n]},e="(?:"+s(t).join("|")+")",o=RegExp(e),i=RegExp(e,"g");return function(t){return t=null==t?"":""+t,o.test(t)?t.replace(i,n):t}};t._.escape=i(o)}(window),function(t,n){"function"==typeof define&&define.amd?define(["jquery"],n):t.DecksterCard=n(t.$||t.jQuery)}(this,function(t){"use strict";function n(n,s){this.$el=t(n),this.$deckster=this.$el.parent().data("deckster"),this.options=t.extend(!0,{},e,s),this.$cardHashKey=Hashcode.value(this.options),this.currentSection="summary"}var e={id:null,title:null,icon:null,lazyLoad:!0,usePopoutLayout:!0,hasPopout:!1,summaryContentHtml:null,summaryContentUrl:null,detailsContentHtml:null,detailsContentUrl:null,cardFunctionsHtml:null,cardFunctionsContentUrl:null,position:{size_x:1,size_y:1,expanded_x:null,expanded_y:null,col:1,row:1},onSummaryLoad:t.noop,onDetailsLoad:t.noop,loadData:t.noop};n.getDefaults=function(){return e},n.getCardHtml=function(t){var n=Deckster.Templates["card/card"];return n({card:t})},n.getCardHash=function(t){return Hashcode.value(t)};var s=n.prototype;s.getCardData=function(){var n={size_x:this.$el.data("sizex"),size_y:this.$el.data("sizey"),col:this.$el.data("col"),row:this.$el.data("row")};return t.extend(!0,{},this.options,{position:n})},s.loadCard=function(){return this.loadSummaryContent(),this.hasDetails=this.options.detailsContentHtml||this.options.detailsContentUrl,!this.hasDetails||this.options.isPopout?this.$el.find(".deckster-card-toggle").hide():this.$el.find(".deckster-card-toggle").show(),!this.options.hasPopout||this.options.isPopout?this.$el.find(".deckster-card-popout").hide():this.$el.find(".deckster-card-popout").show(),!this.hasDetails||this.options.lazyLoad&&"details"!==this.currentSection||this.loadDetailsContent(),this.bindCardHandlers(),this},s.loadPopout=function(){return this.options.isPopout&&this.$el.html('<div class="deckster-popout-wrapper">'+n.getCardHtml(this.options)+"</div>"),this.loadCard()},s.setCardContent=function(t,n){var e=this.$el.find(".deckster-card-content .deckster-"+t);return e.empty(),e.html(n),this[t+"Loaded"]=!0,"summary"===t?this.options.onSummaryLoad(this):this.options.onDetailsLoad(this),this};var o=function(n,e){t.get(n,e)};return s.loadSummaryContent=function(){t.isFunction(this.options.summaryContentHtml)?this.options.summaryContentHtml(this.options,t.proxy(function(t){this.setCardContent("summary",t)},this)):this.options.summaryContentHtml?this.setCardContent("summary",this.options.summaryContentHtml):this.options.summaryContentUrl&&o(this.options.summaryContentUrl,t.proxy(function(t){this.setCardContent("summary",t)},this))},s.loadDetailsContent=function(){t.isFunction(this.options.detailsContentHtml)?this.options.detailsContentHtml(this.options,t.proxy(function(t){this.setCardContent("details",t)},this)):this.options.detailsContentHtml?this.setCardContent("details",this.options.detailsContentHtml):this.options.detailsContentUrl&&o(this.options.detailsContentUrl,t.proxy(function(t){this.setCardContent("details",t)},this))},s.loadContent=function(t){"summary"===t?this.loadSummaryContent():this.loadDetailsContent()},s.reloadContent=function(){this.loadCard()},s.toggleSection=function(n){this.currentSection=n?n:"summary"===this.currentSection?"details":"summary",this.loadContent(this.currentSection);var e="summary"===this.currentSection?"details":"summary";return this.$el.find(".deckster-"+e).fadeOut(200,t.proxy(function(){if(!this.options.isPopout){var t=this.options.position.expanded_x,n=this.options.position.expanded_y||4;"summary"===e?this.$deckster.$gridster.expand_widget(this.$el,t,n):this.$deckster.$gridster.collapse_widget(this.$el);var s="summary"===this.currentSection?"glyphicon-resize-full":"glyphicon-resize-small";this.$el.find(".deckster-card-toggle").removeClass("glyphicon-resize-small glyphicon-resize-full").addClass(s)}this.$el.find(".deckster-"+this.currentSection).fadeIn(200)},this)),this},s.bindCardHandlers=function(){return this.$el.off("click.deckster-card",".deckster-card-toggle"),this.$el.on("click.deckster-card",".deckster-card-toggle",t.proxy(function(){this.toggleSection()},this)),this.$el.off("click.deckster-card",".deckster-card-reload"),this.$el.on("click.deckster-card",".deckster-card-reload",t.proxy(function(){this.reloadContent()},this)),this},n}),function(){(window["Deckster.Templates"]=window["Deckster.Templates"]||{})["card/card"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+=card.isPopout?'\n<div class="deckster-card is-popout" id="'+(null==(__t=card.id)?"":__t)+'">\n':'\n<div class="deckster-card" id="'+(null==(__t=card.id)?"":__t)+'">\n',__p+='\n    <div class="deckster-card-inner">\n        <div class="deckster-card-header">\n            <div class="card-icon"><i class="'+(null==(__t=card.icon)?"":__t)+'"></i></div>\n            <div class="deckster-card-functions">\n                <span class="deckster-card-function deckster-card-menu glyphicon glyphicon-menu-hamburger"></span>\n            </div>\n            <div class="deckster-card-controls">\n                <span class="deckster-card-control deckster-card-reload glyphicon glyphicon-refresh"></span>\n                <span class="deckster-card-control deckster-card-toggle glyphicon glyphicon-resize-full"></span>\n                <a href="'+(null==(__t=card.rootUrl)?"":__t)+"/card/"+(null==(__t=card.id)?"":__t)+'" target="_blank" class="deckster-card-control deckster-card-popout glyphicon glyphicon-new-window thin"></a>\n            </div>\n            <div class="deckster-card-title drag-handle">'+(null==(__t=card.title)?"":__t)+'</div>\n        </div>\n        <div class="deckster-card-content">\n            <div class="deckster-card-loading"></div>\n            <div class="deckster-summary"></div>\n            <div class="deckster-details" style="display: none;"></div>\n        </div>\n    </div>\n</div>';return __p}}(),function(){(window["Deckster.Templates"]=window["Deckster.Templates"]||{})["deck/dock"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<div class="deckster-deck-dock">\n</div>';return __p}}(),function(){(window["Deckster.Templates"]=window["Deckster.Templates"]||{})["deck/toolbar"]=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<div class="deckster-deck-toolbar">\n    <img class="deck-toolbar-logo" src="'+(null==(__t=deck.logoUrl)?"":__t)+'"/>\n    <div class="deck-search-wrapper">\n        <input type="text" class="deck-toolbar-searchbox" placeholder="'+(null==(__t=deck.searchPlaceholder)?"":__t)+'">\n    </div>\n    <div class="deck-toolbar-controls">\n        <span class="toolbar-control refresh glyphicon glyphicon-refresh"></span>\n        <span class="toolbar-control settings glyphicon glyphicon-cog"></span>\n        <span class="toolbar-control save glyphicon glyphicon-floppy-disk"></span>\n    </div>\n</div>';return __p}}();